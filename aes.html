<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AES Keys - Fortnite Hub</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* :root {
            --sidebar-width: 250px;
            --primary: #1e88e5;
            --primary-dark: #1565c0;
            --surface: #1a1a1a;
            --surface-hover: #2a2a2a;
            --text: #ffffff;
            --text-secondary: #9e9e9e;
            --success: #4ade80;
            --error: #ef4444;
            --warning: #fbbf24;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #121212;
            color: var(--text);
            line-height: 1.6;
        } */

        /* Improved Sidebar */
        /* .sidebar {
            width: var(--sidebar-width);
            background-color: var(--surface);
            padding: 2rem 0;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 1000;
            box-shadow: 4px 0 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar-header {
            padding: 0 1.5rem;
            margin-bottom: 2rem;
        }

        .sidebar-logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--primary), #ff4f8b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            list-style: none;
            padding: 0;
        }

        .nav-link {
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            background-color: var(--surface-hover);
            color: var(--primary);
            padding-left: 2rem;
        }

        .nav-link.active {
            background-color: var(--surface-hover);
            border-left: 4px solid var(--primary);
        }

        .nav-link i {
            width: 24px;
            margin-right: 0.8rem;
            transition: transform 0.3s ease;
        }

        .nav-link:hover i {
            transform: scale(1.2);
        } */

        /* Enhanced Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 2rem;
            max-width: 1400px;
            transition: margin-left 0.3s ease;
        }

        .preview-section {
            background-color: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--surface-hover);
        }

        /* Improved AES Keys Display */
        .aes-info {
            background-color: var(--surface-hover);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .main-key {
            background: linear-gradient(145deg, var(--surface), var(--surface-hover));
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .main-key h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .key-container {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }

        .key-text {
            font-family: 'Monaco', 'Consolas', monospace;
            word-break: break-all;
            margin-right: 100px;
        }

        .dynamic-keys {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            animation: fadeIn 0.5s ease-out;
        }

        .key-card {
            background-color: var(--surface-hover);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .key-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .key-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), #ff4f8b);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .key-card:hover::before {
            opacity: 1;
        }

        .copy-button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .copy-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-50%) scale(1.05);
        }

        .copy-button i {
            font-size: 0.9rem;
        }

        /* Enhanced Loading State */
        .loading {
            text-align: center;
            padding: 3rem;
            background-color: var(--surface-hover);
            border-radius: 12px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--surface);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        .error {
            color: var(--error);
            text-align: center;
            padding: 1.5rem;
            background-color: rgba(239, 68, 68, 0.1);
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid var(--error);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: var(--success);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1001;
            background-color: var(--primary);
            border: none;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Enhanced Responsive Design */
        @media (max-width: 1200px) {
            .dynamic-keys {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                box-shadow: none;
            }

            .sidebar.active {
                transform: translateX(0);
                box-shadow: 4px 0 15px rgba(0, 0, 0, 0.3);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
                padding-top: 4rem;
            }

            .mobile-menu-btn {
                display: block;
            }

            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .preview-section {
                padding: 1.5rem;
            }

            .key-card {
                padding: 1.25rem;
            }

            .copy-button {
                position: static;
                transform: none;
                margin-top: 1rem;
                width: 100%;
                justify-content: center;
            }

            .key-text {
                margin-right: 0;
            }
        }

        @media (max-width: 480px) {
            .dynamic-keys {
                grid-template-columns: 1fr;
            }

            .main-key {
                padding: 1.5rem;
            }

            .toast {
                left: 1rem;
                right: 1rem;
                bottom: 1rem;
                text-align: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
    </button>

    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">Fortnite Hub</div>
        </div>
        <ul class="nav-links">
            <li><a href="index.html" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="shop.html" class="nav-link"><i class="fas fa-shop"></i> Shop</a></li>
            <li><a href="challengeTracker.html" class="nav-link"><i class="fas fa-tasks"></i> Challenges</a></li>
            <li><a href="cosmetics.html" class="nav-link"><i class="fas fa-tshirt"></i> Cosmetics</a></li>
            <li><a href="map.html" class="nav-link"><i class="fas fa-map"></i> Map</a></li>
            <li><a href="news.html" class="nav-link"><i class="fas fa-newspaper"></i> News</a></li>
            <li><a href="tournament.html" class="nav-link"><i class="fas fa-trophy"></i> Tournaments</a></li>
            <li><a href="stats.html" class="nav-link"><i class="fas fa-chart-bar"></i> Stats</a></li>
            <li><a href="battlepass.html" class="nav-link"><i class="fas fa-star"></i> Battle Pass Tracker</a></li>
            <li><a href="aes.html" class="nav-link active"><i class="fas fa-key"></i> AES Keys</a></li>
        </ul>
    </nav>

    <div class="main-content">
        <section class="preview-section">
            <div class="section-header">
                <h2>Fortnite AES Keys</h2>
                <div id="lastUpdate" class="text-secondary">Last updated: Checking...</div>
            </div>
            
            <div class="aes-info">
                <p>AES (Advanced Encryption Standard) keys are used to decrypt Fortnite's game files. These keys are automatically updated whenever new game versions are released. The main key is used for the primary game files, while dynamic keys are used for specific PAK files containing additional content.</p>
            </div>

            <div id="mainKeySection" class="main-key">
                <h3>Main Key</h3>
                <div id="mainKeyContent">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <div>Loading main key...</div>
                    </div>
                </div>
            </div>

            <div class="section-header">
                <h3>Dynamic Keys</h3>
                <div class="text-secondary">Used for specific game content packages</div>
            </div>
            <div id="dynamicKeys" class="dynamic-keys">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div>Loading dynamic keys...</div>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span>Copied to clipboard!</span>
    </div>

    <script>
        // Mobile menu toggle
        const menuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        
        menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
        async function fetchAESKeys() {
            try {
                const response = await fetch('https://fortnite-api.com/v2/aes');
                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || 'Failed to fetch AES keys');

                // Update last update time
                const lastUpdateElement = document.getElementById('lastUpdate');
                const lastUpdate = new Date(data.data.updated);
                lastUpdateElement.textContent = `Last updated: ${lastUpdate.toLocaleString()}`;

                // Update main key
                const mainKeySection = document.getElementById('mainKeyContent');
                mainKeySection.innerHTML = `
                    <p>Version: ${data.data.version}</p>
                    <p>Key: ${data.data.mainKey}
                        <button class="copy-button" onclick="copyToClipboard('${data.data.mainKey}')">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </p>
                `;

                // Update dynamic keys
                const dynamicKeysSection = document.getElementById('dynamicKeys');
                if (data.data.dynamicKeys && data.data.dynamicKeys.length > 0) {
                    dynamicKeysSection.innerHTML = data.data.dynamicKeys.map(key => `
                        <div class="key-card">
                            <strong>PAK: ${key.pakFilename}</strong>
                            <p>Key: ${key.key}
                                <button class="copy-button" onclick="copyToClipboard('${key.key}')">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </p>
                        </div>
                    `).join('');
                } else {
                    dynamicKeysSection.innerHTML = '<p>No dynamic keys available at this time.</p>';
                }

            } catch (error) {
                console.error('Error fetching AES keys:', error);
                document.getElementById('mainKeyContent').innerHTML = `
                    <div class="error">
                        <i class="fas fa-exclamation-circle"></i>
                        Failed to load AES keys. Please try again later.
                    </div>
                `;
                document.getElementById('dynamicKeys').innerHTML = '';
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Could add a toast notification here
                alert('Copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        // Initial load
        fetchAESKeys();

        // Refresh every 5 minutes
        setInterval(fetchAESKeys, 300000);        
    </script>
</body>
</html>